<html><head><title>First Ajax Script</title>

 <link rel="stylesheet" type="text/css" href="ajaxintro.css" />
<script type="text/javascript">
<!--
/*Check browser type and create ajax request object */
function ajaxFunction(){
	var ajaxRequest;  // The variable that makes Ajax possible!
	try{
		// Opera 8.0+, Firefox, Safari
		 ajaxRequest = new XMLHttpRequest();

	}
	catch (e){
		// Internet Explorer Browsers
		try{
			ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");

		}
        catch (e) {
			try{
				ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");

			}
            catch (e){

				alert("Your browser has a problem");
				return false;
			}
		}
	}

	// Create callback function to check state of the request

	ajaxRequest.onreadystatechange = function(){
		if(ajaxRequest.readyState == 4){
            if(ajaxRequest.status==200 || ajaxRequest.status==0){
          //  if(ajaxRequest.status==200){
			//document.myForm.time.value = ajaxRequest.responseText;
			document.getElementById("message").innerHTML=ajaxRequest.responseText;
		    }
         }
	} // End callback function

	//yourname=document.myForm.username.value;
	yourname=document.getElementById("username").value;
	ajaxRequest.open("GET", "http://localhost/serverTime.php?name="+yourname+"&random=" + Math.random());
	ajaxRequest.setRequestHeader('If-Modified-Since', 'Sat, 03 Jan 2010 00:00:00GMT');
	ajaxRequest.send(null);

} // End ajaxFunction()
//-->
</script>

</head>
<body>
<form name='myForm'>
Your name: <input type='text' onKeyUp="ajaxFunction();" name='username' id='username' /> <br />
<p>
<div id="message" class="divStyle">
</div>
</p>
</form>
</body>
</html>